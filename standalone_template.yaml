# standalone deploy config demo
# deploy machine: single
# coordinator: name=coordinator1, port=10000
# clusters: single, name=cluster1, port=10001, single worker
# masters: 4, share cluster `cluster1`, connect to same coordinator `coordinator1`
# deploy structure:
#
#+----------------------------------------------------------------------------------------+
#|                                                                                        |
#|          +--------------------------------------------------------------------+        |
#|          |                                                                    |        |
#|          |                          coordinator1                              |        |
#|          |                                                                    |        |
#|          +-----+-----------------+------------------+-----------------+-------+        |
#|                |                 |                  |                 |                |
#|                |                 |                  |                 |                |
#|          +-----+------+    +-----+------+     +-----+------+    +-----+------+         |
#|          |  master1   |    |  master2   |     |  master3   |    |  master4   |         |
#|          |            |    |            |     |            |    |            |         |
#|          +-----+------+    +-----+------+     +-----+------+    +-----+------+         |
#|                |                 |                  |                 |                |
#|                v                 v                  v                 v                |
#|          +-----+-----------------+------------------+-----------------+-------+        |
#|          |                                                                    |        |
#|          |   +-----------+                                                    |        |
#|          |   |worker1    |                                                    |        |
#|          |   |           |                                                    |        |
#|          |   +-----------+                                         cluster1   |        |
#|          |                                                                    |        |
#|          +--------------------------------------------------------------------+        |
#|                                                                                        |
#|                                                                               machine1 |
#|                                                                                        |
#+----------------------------------------------------------------------------------------+


machines:
  - name: machine1
    ip: localhost 
    ssh_string: localhost:22
    base_dir: /Users/jiahaoc/Documents/github.com/FedVision/dest 
    python_for_venv_create: /Users/jiahaoc/.local/share/virtualenvs/FedVision-QQOvJ3OE/bin/python # use to create venv, python3.7+ required

# coordinator start/stop only if machine provided
coordinator:
  name: coordinator1
  machine: machine1
  port: 10000


clusters:
  - name: cluster1
    manager:
      machine: machine1
      port: 10001
    workers:
      - name: worker1
        machine: machine1
        ports: 12000-12099
        max_tasks: 10

masters:
  - name: master1
    machine: machine1
    submit_port: 10002
    coordinator: coordinator1
    cluster: cluster1

  - name: master2
    machine: machine1
    submit_port: 10003
    coordinator: coordinator1
    cluster: cluster1

  - name: master3
    machine: machine1
    submit_port: 10004
    coordinator: coordinator1
    cluster: cluster1

  - name: master4
    machine: machine1
    submit_port: 10005
    coordinator: coordinator1
    cluster: cluster1

